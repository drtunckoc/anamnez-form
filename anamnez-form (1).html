<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dr. Tun√ß Ko√ß - Klinik Anamnez Formu</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background: #f8fafc; color: #1e293b; }
        @media print {
            .no-print { display: none !important; }
            body { background: white; padding: 0; margin: 0; }
            .print-area { box-shadow: none !important; border: none !important; width: 100% !important; max-width: none !important; padding: 0 !important; }
            .report-box { border: 1px solid #e2e8f0 !important; border-radius: 0 !important; padding: 30px !important; display: block !important; }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        const API_KEY = "AIzaSyBSEg2XlyBghFfXIdHQtKkG0rkmjBWpGzo";
        const DOKTOR_TEL = "905433526012";

        const App = () => {
            const [step, setStep] = useState(1);
            const [loading, setLoading] = useState(false);
            const [hata, setHata] = useState('');
            const [formData, setFormData] = useState({
                adSoyad: '', yas: '', boy: '', kilo: '', meslek: '', sehir: '', tel: '',
                sikayetler: [], sikayetIlk: '', sikayetArtis: '', agriKarakter: '',
                yurumeMesafesi: '', geceAgrisi: 'Hayƒ±r', acilDurum: 'Hayƒ±r',
                omurgaIlaclar: '', fizikTedavi: 'Hayƒ±r', fizikTedaviFayda: '',
                girisimselTedavi: 'Hayƒ±r', girisimselDetay: '',
                ameliyat: 'Hayƒ±r', ameliyatDetay: '',
                genelSaglik: '', kanSulandirici: 'Hayƒ±r', kanSulandiriciAd: '',
                tumIlaclar: ''
            });
            const [aiSummary, setAiSummary] = useState('');

            const update = (f, v) => setFormData(p => ({ ...p, [f]: v }));
            const toggle = (i) => {
                const list = formData.sikayetler.includes(i)
                    ? formData.sikayetler.filter(x => x !== i)
                    : [...formData.sikayetler, i];
                update('sikayetler', list);
            };

            // Hasta bilgilerinden tam metin hazƒ±rla (AI olmasa bile WhatsApp'a g√∂nderilecek)
            const hastaMetni = () => {
                return `üè• *DR. TUN√á KO√á KLƒ∞Nƒ∞ƒûƒ∞ - HASTA √ñN Bƒ∞LGƒ∞ FORMU*

üë§ *Kƒ∞≈ûƒ∞SEL Bƒ∞LGƒ∞LER*
‚Ä¢ Ad Soyad: ${formData.adSoyad}
‚Ä¢ Ya≈ü: ${formData.yas}
‚Ä¢ Boy/Kilo: ${formData.boy} cm / ${formData.kilo} kg
‚Ä¢ ≈ûehir: ${formData.sehir}
‚Ä¢ Meslek: ${formData.meslek}
‚Ä¢ Telefon: ${formData.tel}

ü©∫ *≈ûƒ∞KAYETLER*
‚Ä¢ ${formData.sikayetler.join('\n‚Ä¢ ') || 'Belirtilmedi'}
‚Ä¢ ƒ∞lk Ba≈ülangƒ±√ß: ${formData.sikayetIlk || 'Belirtilmedi'}
‚Ä¢ ≈ûiddetlenme: ${formData.sikayetArtis || 'Belirtilmedi'}
‚Ä¢ Aƒürƒ± Ne Zaman Artar: ${formData.agriKarakter || 'Belirtilmedi'}

‚ö†Ô∏è *KRƒ∞Tƒ∞K Bƒ∞LGƒ∞LER*
‚Ä¢ Y√ºr√ºme Mesafesi: ${formData.yurumeMesafesi || 'Belirtilmedi'}
‚Ä¢ Gece Aƒürƒ±sƒ±: ${formData.geceAgrisi}
‚Ä¢ üö® Acil Bulgular (ƒ∞drar Ka√ßƒ±rma/Uyu≈üma): ${formData.acilDurum}

üíä *TEDAVƒ∞ √ñYK√úS√ú*
‚Ä¢ Omurga ƒ∞la√ßlarƒ±: ${formData.omurgaIlaclar || 'Yok'}
‚Ä¢ Fizik Tedavi: ${formData.fizikTedavi}${formData.fizikTedaviFayda ? ' - ' + formData.fizikTedaviFayda : ''}
‚Ä¢ Giri≈üimsel Tedavi: ${formData.girisimselTedavi}${formData.girisimselDetay ? ' - ' + formData.girisimselDetay : ''}

üî™ *AMELƒ∞YAT & GENEL SAƒûLIK*
‚Ä¢ Omurga Ameliyatƒ±: ${formData.ameliyat}${formData.ameliyatDetay ? ' - ' + formData.ameliyatDetay : ''}
‚Ä¢ Genel Saƒülƒ±k: ${formData.genelSaglik || 'Belirtilmedi'}
‚Ä¢ üî¥ Kan Sulandƒ±rƒ±cƒ±: ${formData.kanSulandirici}${formData.kanSulandiriciAd ? ' (' + formData.kanSulandiriciAd + ')' : ''}
‚Ä¢ Kullanƒ±lan ƒ∞la√ßlar: ${formData.tumIlaclar || 'Belirtilmedi'}`;
            };

            const generateAI = async () => {
                setLoading(true);
                setHata('');
                
                const prompt = `Sen Dr. Tun√ß Ko√ß'un kliniƒüinde √ßalƒ±≈üan deneyimli bir omurga cerrahƒ± asistanƒ±sƒ±n. A≈üaƒüƒ±daki hasta verilerini analiz et ve T√ºrk√ße olarak ≈üu ba≈ülƒ±klarƒ± i√ßeren klinik bir deƒüerlendirme yaz:

1. GENEL DEƒûERLENDƒ∞RME: Hastanƒ±n durumunu 2-3 c√ºmle ile √∂zetle.
2. √ñNE √áIKAN BULGULAR: Dikkat √ßeken √∂nemli noktalarƒ± belirt (√∂rn: kan sulandƒ±rƒ±cƒ± kullanƒ±mƒ±, ameliyat √∂yk√ºs√º, y√ºr√ºme kƒ±sƒ±tlƒ±lƒ±ƒüƒ±, gece aƒürƒ±sƒ±).
3. OLASI TANILER: Bu bulgulara g√∂re akla gelen 2-3 olasƒ± tanƒ±yƒ± belirt (disk hernisi, spinal stenoz, spondilolistezis gibi).
4. Dƒ∞KKAT EDƒ∞LMESƒ∞ GEREKENLER: Muayene √∂ncesi veya giri≈üim sƒ±rasƒ±nda dikkat edilmesi gereken √∂zel durumlarƒ± yaz.

Hasta Bilgileri:
- Ad: ${formData.adSoyad}, Ya≈ü: ${formData.yas}
- Boy/Kilo: ${formData.boy}cm / ${formData.kilo}kg
- Meslek: ${formData.meslek}
- ≈ûikayetler: ${formData.sikayetler.join(', ')}
- Ba≈ülangƒ±√ß: ${formData.sikayetIlk}, ≈ûiddetlenme: ${formData.sikayetArtis}
- Aƒürƒ± ne zaman artar: ${formData.agriKarakter}
- Y√ºr√ºme mesafesi: ${formData.yurumeMesafesi}
- Gece aƒürƒ±sƒ±: ${formData.geceAgrisi}
- ACƒ∞L BULGULAR (idrar ka√ßƒ±rma/uyu≈üma): ${formData.acilDurum}
- Fizik tedavi: ${formData.fizikTedavi} ${formData.fizikTedaviFayda}
- Giri≈üimsel tedavi: ${formData.girisimselTedavi} ${formData.girisimselDetay}
- Ameliyat √∂yk√ºs√º: ${formData.ameliyatDetay || 'Yok'}
- Genel saƒülƒ±k: ${formData.genelSaglik}
- Kan sulandƒ±rƒ±cƒ±: ${formData.kanSulandiriciAd || 'Kullanmƒ±yor'}
- T√ºm ila√ßlar: ${formData.tumIlaclar}

Not: Bu bir √∂n bilgilendirme ama√ßlƒ±dƒ±r, kesin tanƒ± deƒüildir.`;

                try {
                    const res = await fetch(
                        `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.0-pro:generateContent?key=${API_KEY}`,
                        {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                contents: [{ parts: [{ text: prompt }] }],
                                generationConfig: { temperature: 0.3, maxOutputTokens: 800 }
                            })
                        }
                    );

                    const data = await res.json();

                    if (data.candidates && data.candidates[0]?.content?.parts[0]?.text) {
                        setAiSummary(data.candidates[0].content.parts[0].text);
                    } else if (data.error) {
                        // API hatasƒ± varsa detayƒ± g√∂ster, yine de forma ge√ß
                        setHata(`AI Hatasƒ±: ${data.error.message}`);
                        setAiSummary('');
                    } else {
                        setHata('AI yanƒ±t vermedi, ancak hasta bilgileri hazƒ±r.');
                        setAiSummary('');
                    }
                } catch (e) {
                    setHata(`Baƒülantƒ± hatasƒ±: ${e.message}. Hasta bilgileri yine de WhatsApp ile g√∂nderilebilir.`);
                    setAiSummary('');
                }

                setStep(6);
                setLoading(false);
            };

            const shareWhatsApp = () => {
                const aiBlok = aiSummary
                    ? `\nü§ñ *AI KLƒ∞Nƒ∞K √ñZET*\n${aiSummary}\n\n`
                    : '\n';
                
                const tamMetin = hastaMetni() + aiBlok;
                
                // wa.me linki ile g√∂nder
                const url = `https://wa.me/${DOKTOR_TEL}?text=${encodeURIComponent(tamMetin)}`;
                window.open(url, '_blank');
            };

            // Progress bar
            const progress = Math.round(((step - 1) / 5) * 100);

            return (
                <div className="max-w-2xl mx-auto min-h-screen p-4 flex flex-col justify-center">
                    <div className="bg-white rounded-3xl shadow-2xl overflow-hidden border border-slate-200 print-area">
                        
                        {/* √úst ba≈ülƒ±k */}
                        <div className="bg-slate-900 p-8 text-white no-print">
                            <h1 className="text-2xl font-bold">Dr. Tun√ß Ko√ß</h1>
                            <p className="text-blue-400 text-xs uppercase font-semibold tracking-widest mt-1">
                                Giri≈üimsel Omurga Cerrahisi ¬∑ √ñn Bilgi Formu
                            </p>
                            {step < 6 && (
                                <div className="mt-4">
                                    <div className="flex justify-between text-xs text-slate-400 mb-1">
                                        <span>Adƒ±m {step} / 5</span>
                                        <span>%{progress}</span>
                                    </div>
                                    <div className="w-full bg-slate-700 rounded-full h-1.5">
                                        <div className="bg-blue-500 h-1.5 rounded-full transition-all duration-500" style={{width: `${progress}%`}}></div>
                                    </div>
                                </div>
                            )}
                        </div>

                        <div className="p-8 md:p-12">

                            {/* ADIM 1: Ki≈üisel Bilgiler */}
                            {step === 1 && (
                                <div className="space-y-6">
                                    <h2 className="text-xl font-bold border-l-4 border-blue-600 pl-4">1. Ki≈üisel Bilgiler</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <input type="text" placeholder="Ad Soyad *" className="p-4 bg-slate-50 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400 md:col-span-2" onChange={e => update('adSoyad', e.target.value)} defaultValue={formData.adSoyad} />
                                        <input type="tel" placeholder="Telefon" className="p-4 bg-slate-50 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400" onChange={e => update('tel', e.target.value)} defaultValue={formData.tel} />
                                        <input type="number" placeholder="Ya≈ü *" className="p-4 bg-slate-50 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400" onChange={e => update('yas', e.target.value)} defaultValue={formData.yas} />
                                        <input type="text" placeholder="≈ûehir" className="p-4 bg-slate-50 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400" onChange={e => update('sehir', e.target.value)} defaultValue={formData.sehir} />
                                        <input type="text" placeholder="Meslek" className="p-4 bg-slate-50 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400" onChange={e => update('meslek', e.target.value)} defaultValue={formData.meslek} />
                                        <input type="number" placeholder="Boy (cm)" className="p-4 bg-slate-50 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400" onChange={e => update('boy', e.target.value)} defaultValue={formData.boy} />
                                        <input type="number" placeholder="Kilo (kg)" className="p-4 bg-slate-50 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400" onChange={e => update('kilo', e.target.value)} defaultValue={formData.kilo} />
                                    </div>
                                </div>
                            )}

                            {/* ADIM 2: ≈ûikayet */}
                            {step === 2 && (
                                <div className="space-y-6">
                                    <h2 className="text-xl font-bold border-l-4 border-blue-600 pl-4">2. ≈ûikayetler</h2>
                                    <p className="text-sm text-slate-500">Birden fazla se√ßebilirsiniz.</p>
                                    <div className="grid grid-cols-1 gap-2">
                                        {['Belim aƒürƒ±yor', 'Bel, kal√ßa ve bacak aƒürƒ±sƒ±', 'Boynum aƒürƒ±yor', 'Boyun, omuz ve kol aƒürƒ±sƒ±', 'Sƒ±rtƒ±m aƒürƒ±yor', 'Kuvvet kaybƒ± ya≈üƒ±yorum', 'His kaybƒ± ya≈üƒ±yorum'].map(i => (
                                            <button key={i} onClick={() => toggle(i)}
                                                className={`p-4 rounded-xl text-left border-2 transition-all ${formData.sikayetler.includes(i) ? 'bg-blue-600 text-white border-blue-600 shadow-md' : 'bg-slate-50 border-slate-200 hover:border-blue-300'}`}>
                                                {formData.sikayetler.includes(i) ? '‚úì ' : ''}{i}
                                            </button>
                                        ))}
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 pt-2 border-t mt-4">
                                        <input type="text" placeholder="≈ûikayet ne zaman ba≈üladƒ±?" className="p-4 bg-slate-50 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400" onChange={e => update('sikayetIlk', e.target.value)} defaultValue={formData.sikayetIlk} />
                                        <input type="text" placeholder="Ne zaman ≈üiddetlendi?" className="p-4 bg-red-50 rounded-xl border border-red-200 focus:outline-none focus:ring-2 focus:ring-red-300" onChange={e => update('sikayetArtis', e.target.value)} defaultValue={formData.sikayetArtis} />
                                    </div>
                                    <select className="w-full p-4 bg-slate-100 rounded-xl border border-slate-200" onChange={e => update('agriKarakter', e.target.value)} value={formData.agriKarakter}>
                                        <option value="">Aƒürƒ±nƒ±z ne zaman artƒ±yor?</option>
                                        <option value="Ayakta durunca">Ayakta durunca</option>
                                        <option value="Y√ºr√ºy√ºnce">Y√ºr√ºy√ºnce</option>
                                        <option value="Oturunca">Oturunca</option>
                                        <option value="√ñne eƒüilince">√ñne eƒüilince</option>
                                    </select>
                                </div>
                            )}

                            {/* ADIM 3: Kritik */}
                            {step === 3 && (
                                <div className="space-y-6">
                                    <h2 className="text-xl font-bold border-l-4 border-red-600 pl-4">3. Kritik Sorular</h2>
                                    <div className="p-4 bg-slate-50 rounded-2xl border border-slate-200">
                                        <label className="font-semibold text-sm">Kesintisiz ne kadar y√ºr√ºyebiliyorsunuz?</label>
                                        <input type="text" placeholder="√ñrn: 100 metre, 500 metre, sƒ±nƒ±rsƒ±z..." className="w-full mt-2 p-3 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400" onChange={e => update('yurumeMesafesi', e.target.value)} defaultValue={formData.yurumeMesafesi} />
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div className="p-4 bg-slate-50 rounded-2xl border border-slate-200">
                                            <p className="font-semibold text-sm mb-3">Gece aƒürƒ±sƒ± oluyor mu?</p>
                                            <div className="flex gap-2">
                                                {['Hayƒ±r', 'Evet'].map(o => (
                                                    <button key={o} onClick={() => update('geceAgrisi', o)}
                                                        className={`flex-1 py-3 rounded-lg font-bold transition-all ${formData.geceAgrisi === o ? 'bg-slate-800 text-white' : 'bg-white border border-slate-200'}`}>{o}</button>
                                                ))}
                                            </div>
                                        </div>
                                        <div className="p-4 bg-red-50 rounded-2xl border-2 border-red-200">
                                            <p className="font-bold text-red-800 text-sm mb-1">üö® ƒ∞drar ka√ßƒ±rma veya kasƒ±k/ayak uyu≈ümasƒ± var mƒ±?</p>
                                            <p className="text-red-600 text-xs mb-3">(Acil belirti)</p>
                                            <div className="flex gap-2">
                                                {['Hayƒ±r', 'Evet'].map(o => (
                                                    <button key={o} onClick={() => update('acilDurum', o)}
                                                        className={`flex-1 py-3 rounded-lg font-bold transition-all ${formData.acilDurum === o ? 'bg-red-600 text-white' : 'bg-white border border-red-200'}`}>{o}</button>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* ADIM 4: Tedavi √ñyk√ºs√º */}
                            {step === 4 && (
                                <div className="space-y-6">
                                    <h2 className="text-xl font-bold border-l-4 border-blue-600 pl-4">4. Tedavi √ñyk√ºs√º</h2>
                                    <textarea placeholder="Omurga i√ßin kullandƒ±ƒüƒ±nƒ±z ila√ßlar ve faydasƒ±?" className="w-full p-4 bg-slate-50 rounded-xl h-24 border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400" onChange={e => update('omurgaIlaclar', e.target.value)} defaultValue={formData.omurgaIlaclar} />
                                    
                                    <div className="p-4 bg-slate-50 rounded-xl border border-slate-200">
                                        <p className="text-sm font-semibold mb-2">Fizik tedavi (fizyoterapi) aldƒ±nƒ±z mƒ±?</p>
                                        <div className="flex gap-2 mb-2">
                                            {['Hayƒ±r', 'Evet'].map(o => (
                                                <button key={o} onClick={() => update('fizikTedavi', o)}
                                                    className={`flex-1 py-2 rounded-lg font-bold transition-all ${formData.fizikTedavi === o ? 'bg-slate-800 text-white' : 'bg-white border border-slate-200'}`}>{o}</button>
                                            ))}
                                        </div>
                                        {formData.fizikTedavi === 'Evet' && <input type="text" placeholder="Fayda g√∂rd√ºn√ºz m√º?" className="w-full p-3 rounded-lg border border-slate-200" onChange={e => update('fizikTedaviFayda', e.target.value)} defaultValue={formData.fizikTedaviFayda} />}
                                    </div>

                                    <div className="p-4 bg-blue-50 rounded-xl border border-blue-200">
                                        <p className="text-sm font-semibold mb-2">Enjeksiyon / sinir blokajƒ± / aƒürƒ± tedavisi yapƒ±ldƒ± mƒ±?</p>
                                        <div className="flex gap-2 mb-2">
                                            {['Hayƒ±r', 'Evet'].map(o => (
                                                <button key={o} onClick={() => update('girisimselTedavi', o)}
                                                    className={`flex-1 py-2 rounded-lg font-bold transition-all ${formData.girisimselTedavi === o ? 'bg-blue-700 text-white' : 'bg-white border border-blue-200'}`}>{o}</button>
                                            ))}
                                        </div>
                                        {formData.girisimselTedavi === 'Evet' && <textarea className="w-full p-3 rounded-lg border border-blue-200" placeholder="Ne yapƒ±ldƒ±? Fayda g√∂rd√ºn√ºz m√º?" onChange={e => update('girisimselDetay', e.target.value)} defaultValue={formData.girisimselDetay} />}
                                    </div>
                                </div>
                            )}

                            {/* ADIM 5: Ameliyat & Genel Saƒülƒ±k */}
                            {step === 5 && (
                                <div className="space-y-6">
                                    <h2 className="text-xl font-bold border-l-4 border-blue-600 pl-4">5. Ameliyat & Genel Saƒülƒ±k</h2>
                                    
                                    <div className="p-4 bg-slate-100 rounded-xl border border-slate-200">
                                        <p className="text-sm font-semibold mb-2">Daha √∂nce omurga ameliyatƒ± ge√ßirdiniz mi?</p>
                                        <div className="flex gap-2 mb-2">
                                            {['Hayƒ±r', 'Evet'].map(o => (
                                                <button key={o} onClick={() => update('ameliyat', o)}
                                                    className={`flex-1 py-2 rounded-lg font-bold transition-all ${formData.ameliyat === o ? 'bg-slate-800 text-white' : 'bg-white border border-slate-200'}`}>{o}</button>
                                            ))}
                                        </div>
                                        {formData.ameliyat === 'Evet' && <textarea className="w-full p-3 rounded-lg border border-slate-200" placeholder="Hangi yƒ±l, nerede? Sonu√ß nasƒ±l oldu?" onChange={e => update('ameliyatDetay', e.target.value)} defaultValue={formData.ameliyatDetay} />}
                                    </div>

                                    <textarea placeholder="Ba≈üka saƒülƒ±k sorunlarƒ±nƒ±z? (Diyabet, tansiyon, kalp, vb.)" className="w-full p-4 bg-slate-50 rounded-xl h-20 border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400" onChange={e => update('genelSaglik', e.target.value)} defaultValue={formData.genelSaglik} />

                                    <div className="p-4 bg-red-50 rounded-xl border-2 border-red-200">
                                        <p className="font-bold text-red-800 text-sm mb-2">üî¥ Kan sulandƒ±rƒ±cƒ± ila√ß kullanƒ±yor musunuz?</p>
                                        <p className="text-xs text-red-600 mb-2">(√ñrn: Coumadin, Xarelto, Plavix, Aspirin...)</p>
                                        <div className="flex gap-2 mb-2">
                                            {['Hayƒ±r', 'Evet'].map(o => (
                                                <button key={o} onClick={() => update('kanSulandirici', o)}
                                                    className={`flex-1 py-2 rounded-lg font-bold transition-all ${formData.kanSulandirici === o ? 'bg-red-600 text-white' : 'bg-white border border-red-200'}`}>{o}</button>
                                            ))}
                                        </div>
                                        {formData.kanSulandirici === 'Evet' && <input type="text" placeholder="ƒ∞lacƒ±n adƒ±?" className="w-full p-3 rounded-lg border border-red-200" onChange={e => update('kanSulandiriciAd', e.target.value)} defaultValue={formData.kanSulandiriciAd} />}
                                    </div>

                                    <textarea placeholder="Kullandƒ±ƒüƒ±nƒ±z t√ºm ila√ßlar? (ƒ∞sim ve doz)" className="w-full p-4 bg-slate-50 rounded-xl h-20 border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-400" onChange={e => update('tumIlaclar', e.target.value)} defaultValue={formData.tumIlaclar} />
                                </div>
                            )}

                            {/* ADIM 6: RAPOR */}
                            {step === 6 && (
                                <div className="space-y-6 report-box">
                                    <h2 className="text-2xl font-bold text-center border-b pb-4">üìã ANAMNEZ RAPORU</h2>
                                    
                                    {/* Hata mesajƒ± */}
                                    {hata && (
                                        <div className="p-4 bg-yellow-50 border border-yellow-200 rounded-xl text-yellow-800 text-sm">
                                            ‚ö†Ô∏è {hata}
                                        </div>
                                    )}

                                    {/* AI √ñzeti */}
                                    {aiSummary && (
                                        <div className="p-4 bg-blue-50 rounded-xl border border-blue-200 no-print">
                                            <p className="text-xs font-bold text-blue-600 uppercase mb-2">ü§ñ AI Klinik √ñzeti</p>
                                            <p className="text-sm text-blue-900 leading-relaxed italic">{aiSummary}</p>
                                        </div>
                                    )}

                                    {/* Hasta Bilgileri */}
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-y-3 text-sm pt-2 border-t">
                                        <div><strong>Hasta:</strong> {formData.adSoyad}</div>
                                        <div><strong>Ya≈ü:</strong> {formData.yas}</div>
                                        <div><strong>Boy/Kilo:</strong> {formData.boy} cm / {formData.kilo} kg</div>
                                        <div><strong>≈ûehir/Meslek:</strong> {formData.sehir} / {formData.meslek}</div>
                                        <div className="md:col-span-2"><strong>Telefon:</strong> {formData.tel}</div>
                                        <div className="md:col-span-2 pt-2 border-t"><strong>≈ûikayetler:</strong> {formData.sikayetler.join(', ') || '-'}</div>
                                        <div><strong>Ba≈ülangƒ±√ß:</strong> {formData.sikayetIlk || '-'}</div>
                                        <div><strong>≈ûiddetlenme:</strong> {formData.sikayetArtis || '-'}</div>
                                        <div><strong>Y√ºr√ºme:</strong> {formData.yurumeMesafesi || '-'}</div>
                                        <div><strong>Gece Aƒürƒ±sƒ±:</strong> {formData.geceAgrisi}</div>
                                        <div className={`font-bold uppercase ${formData.acilDurum === 'Evet' ? 'text-red-600' : ''}`}>
                                            üö® <strong>Acil Bulgular:</strong> {formData.acilDurum}
                                        </div>
                                        <div className="md:col-span-2 pt-2 border-t"><strong>Ameliyat √ñyk√ºs√º:</strong> {formData.ameliyatDetay || 'Yok'}</div>
                                        <div className="md:col-span-2"><strong>Genel Saƒülƒ±k:</strong> {formData.genelSaglik || '-'}</div>
                                        <div className="md:col-span-2"><strong>T√ºm ƒ∞la√ßlar:</strong> {formData.tumIlaclar || '-'}</div>
                                        <div className={`md:col-span-2 font-bold ${formData.kanSulandirici === 'Evet' ? 'text-red-700' : ''}`}>
                                            üî¥ <strong>Kan Sulandƒ±rƒ±cƒ±:</strong> {formData.kanSulandiriciAd || (formData.kanSulandirici === 'Hayƒ±r' ? 'Kullanmƒ±yor' : '-')}
                                        </div>
                                    </div>

                                    {/* Butonlar */}
                                    <div className="flex flex-col gap-3 no-print pt-4 border-t">
                                        <button onClick={shareWhatsApp}
                                            className="w-full bg-green-500 hover:bg-green-600 text-white p-5 rounded-2xl font-bold flex items-center justify-center gap-2 shadow-xl active:scale-95 transition-all text-lg">
                                            üì± WHATSAPP ƒ∞LE DOKTORA G√ñNDER
                                        </button>
                                        <button onClick={() => window.print()}
                                            className="w-full bg-slate-800 hover:bg-slate-900 text-white p-4 rounded-2xl font-bold active:scale-95 transition-all">
                                            üñ®Ô∏è FORMU YAZDIR (A4)
                                        </button>
                                        <button onClick={() => { setStep(1); setAiSummary(''); setHata(''); }}
                                            className="w-full bg-slate-100 text-slate-600 p-3 rounded-xl text-sm font-medium active:scale-95 transition-all">
                                            ‚Üê Yeni Form Doldur
                                        </button>
                                    </div>

                                    <div className="hidden print:block text-xs text-slate-400 mt-20 flex justify-between">
                                        <span>ƒ∞mza: ____________________</span>
                                        <span>Tarih: {new Date().toLocaleDateString('tr-TR')}</span>
                                    </div>
                                </div>
                            )}

                            {/* ƒ∞leri / Geri butonlarƒ± */}
                            {step < 6 && (
                                <div className="mt-10 flex justify-between items-center no-print">
                                    <button onClick={() => setStep(s => s - 1)} disabled={step === 1}
                                        className={`px-6 py-3 rounded-xl font-bold transition-all ${step === 1 ? 'invisible' : 'bg-slate-100 text-slate-600 hover:bg-slate-200'}`}>
                                        ‚Üê Geri
                                    </button>
                                    <button
                                        onClick={() => step === 5 ? generateAI() : setStep(s => s + 1)}
                                        disabled={loading}
                                        className="bg-blue-600 hover:bg-blue-700 text-white px-10 py-4 rounded-2xl font-bold shadow-xl active:scale-95 transition-all disabled:opacity-60">
                                        {loading ? '‚è≥ Analiz ediliyor...' : (step === 5 ? '‚úì Tamamla ve Raporu Olu≈ütur' : 'ƒ∞leri ‚Üí')}
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
